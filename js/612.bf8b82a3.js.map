{"version":3,"file":"js/612.bf8b82a3.js","mappings":"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","sources":["webpack://chat/./src/views/chat.vue","webpack://chat/./src/components/ChatMessage.vue","webpack://chat/./src/components/ChatMessage.vue?7c5f","webpack://chat/./src/utils/eventapi.js","webpack://chat/./src/views/chat.vue?33e7"],"sourcesContent":["<template>\r\n    <div id=\"chat\">\r\n        <transition-group :name=\"transition_group\">\r\n          <ChatMessage v-for=\"mes in Messages\" :key=\"mes.tags.id\" :PersonalEmotes=\"PersonalEmotes[mes.source.nick]\"\r\n          :Emotes=\"Emotes\" :GlobalBadges=\"GlobalBadges\"\r\n          :Paints=\"Paints\" :OtherBadges=\"OtherBadges\"\r\n          :defaultColors=\"defaultColors\" :payload=\"mes\"\r\n          :BG=\"mes.BG\" :overridedBadges=\"overridedBadges\"/>\r\n        </transition-group>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n  // значки ффз (и чаттерино?)\r\n\r\n  import ChatMessage from '@/components/ChatMessage.vue'\r\n  import apis from '@/utils/tpd.js'\r\n  import EventApi from '@/utils/eventapi.js'\r\n  import Twitch from '@/utils/twitch.js'\r\n  import Common from '@/utils/common'\r\n  import { useHead } from '@vueuse/head'\r\n  \r\n  export default {\r\n    name: 'chat-page',\r\n    components: {\r\n        ChatMessage\r\n    },\r\n    data() {\r\n      return {\r\n        EventApi: null,\r\n\r\n        // settings:\r\n        // value: selectedValue || defaultValue\r\n        paintsEnabled: this.$route.query.paints || \"1\",\r\n        font_size: this.$route.query.font_size || \"18\",\r\n        // value: selectedValue != off (true by default)\r\n        altBG: this.$route.query.altbg != \"0\",\r\n        BG: this.$route.query.background || \"#2b2b2b\",\r\n        BG2: \"\",\r\n        useEventAPI: this.$route.query.eventapi != \"0\",\r\n        pEmotesEnabled: this.$route.query.pemotes != \"0\",\r\n        deleteAfter : this.$route.query.deleteafter || \"0\",\r\n        fontName: this.$route.query.fontname || \"roboto\",\r\n        ignoreList: (this.$route.query.ignore || \"\").toLowerCase().split(\" \"),\r\n\r\n        // other:\r\n        PersonalEmotes: {},\r\n\r\n        channel: this.$route.query.channel,\r\n        currBG: true,\r\n        IsDisconnected: false,\r\n        Emotes: {},\r\n        GlobalBadges: [],\r\n        OtherBadges: [],\r\n        Paints: [],\r\n        channelID: null,\r\n        client: null,\r\n        overridedBadges: false,\r\n        Messages: [],\r\n        defaultColors: [\"#4242f7\", \"#ff7f50\", \"#1e90ff\", \"#00ff7f\", \"#9acd32\", \"#008000\", \"#ff4500\", \"#ff0000\", \"#daa520\", \"#ff69b4\", \"#5f9ea0\", \"#2e8b57\", \"#d2691e\", \"#a065d7\", \"#b22222\"],\r\n      }\r\n    },\r\n    methods: {\r\n      onEmoteDelete(e) {\r\n        delete this.Emotes[e.old_value.id]\r\n      },\r\n      onEmoteAdd(e) {\r\n        this.Emotes[e.value.name] = {\"ID\": e.value.id, \"Type\": \"7TV\"}\r\n      },\r\n      onEmoteRename(e) {\r\n        console.log(e)\r\n        this.Emotes[e.value.name] = this.Emotes[e.old_value.name]\r\n        delete this.Emotes[e.old_value.name]\r\n      },\r\n      onPersonalEmotes(e, user) {\r\n        if (e != undefined && user != undefined && this.pEmotesEnabled) {\r\n          this.PersonalEmotes[user] = e\r\n        }\r\n      },\r\n      async get7tvchannel() {\r\n        let stv = await apis.RetryOnError(apis.get7tvEmotes, [this.channelID], 3)\r\n        if (stv.length > 0) {\r\n          console.log(\"loaded seventv channel\")\r\n          this.Emotes = Object.assign(this.Emotes, stv[0])\r\n\r\n          // initializing event api\r\n          if (this.useEventAPI) {\r\n            this.EventApi = new EventApi(stv[1], this.channelID, this.onEmoteAdd, this.onEmoteRename)\r\n\r\n            this.EventApi.onDelete = this.onEmoteDelete\r\n            this.EventApi.onAdd = this.onEmoteAdd\r\n            this.EventApi.onRename = this.onEmoteRename\r\n\r\n            this.EventApi.onPersonalEmotes = this.onPersonalEmotes\r\n\r\n            this.EventApi.Connect()\r\n          }\r\n        }\r\n      },\r\n      async getbttvchannel() {\r\n        this.Emotes = Object.assign(this.Emotes, await apis.RetryOnError(apis.getBttvEmotes, [this.channelID], 3))\r\n      },\r\n      async getsubscriberbadges() {\r\n        let subs = await apis.RetryOnError(apis.getSubscriberBadges, [this.channelID], 3)\r\n        if (subs) {\r\n          this.GlobalBadges[\"subscriber\"] = subs\r\n          console.log(\"loaded sub badges\")\r\n        }\r\n      },\r\n      async onUserID(id) {\r\n          console.log(this.channelID)\r\n          if (this.channelID == null) {\r\n            this.channelID = id\r\n\r\n            // a\r\n            await this.getbttvchannel()\r\n            await this.get7tvchannel()\r\n            await this.getsubscriberbadges()\r\n          }\r\n        }\r\n    },\r\n    created: async function() {\r\n      useHead({\r\n          link: [{href: `https://fonts.googleapis.com/css2?family=${this.$route.query.fontname || \"Roboto\"}&display=swap`, rel: \"stylesheet\"}],\r\n        })\r\n\r\n        // check for bg:\r\n        if (this.BG != \"#2b2b2b\" && this.BG != \"transparent\") {\r\n          this.BG = \"#\" + this.BG\r\n        }\r\n\r\n        // alt bg creation:\r\n        if (this.altBG && this.BG != \"transparent\") {\r\n          let minus = 1\r\n          let gray = Common.toGray(this.BG) \r\n          if (gray > 0.38) {\r\n            minus = -30/gray\r\n          }\r\n          this.BG2 = Common.pSBC(0.01*minus, this.BG)\r\n        } else if (this.BG == \"transparent\") {\r\n          this.BG2 = \"transparent\"\r\n        }\r\n\r\n        this.client = new Twitch(this.channel);\r\n\r\n        this.client.OnUserId = this.onUserID\r\n        this.client.OnPrivateMessage = async (payload) => {\r\n          if (this.ignoreList.includes(payload.source.nick)) return\r\n\r\n          payload.BG = this.BG\r\n          if (this.altBG) {\r\n            payload.BG = this.currBG ? this.BG : this.BG2\r\n            this.currBG = !this.currBG\r\n          }\r\n          // payload.tags.color = undefined\r\n          // payload.PersonalEmotes = undefined\r\n          // if (payload.source.nick in this.PersonalEmotes) {\r\n          //   payload.PersonalEmotes = this.PersonalEmotes[payload.source.nick]\r\n          // }\r\n\r\n          this.Messages.push(payload)\r\n\r\n          if (this.deleteAfter != \"0\") {\r\n            setTimeout(() => {\r\n                let index = this.Messages.indexOf(payload)\r\n                if (index > -1) {\r\n                  this.Messages.splice(index, 1);\r\n                }\r\n            }, parseInt(this.deleteAfter)*1000);\r\n          }\r\n          if (this.Messages.length > 50) {\r\n            this.Messages.shift()\r\n          }\r\n        }\r\n        this.client.OnClearChat = async (payload) => {\r\n          this.Messages = this.Messages.filter(item => item.source.nick !== payload.parameters)\r\n        }\r\n        this.client.OnClearMessage = async (payload) => {\r\n          this.Messages = this.Messages.filter(item => item.tags[\"id\"] !== payload.tags[\"target-msg-id\"])\r\n        }\r\n\r\n        this.client.connect()\r\n        // getting data\r\n\r\n        try {\r\n          let userid = await apis.getUserID(this.channel)\r\n          console.log(userid)\r\n          await this.onUserID(userid)\r\n        } catch (error) {\r\n          // pass\r\n        }\r\n\r\n        this.Emotes = Object.assign(this.Emotes, await apis.RetryOnError(apis.get7tvGlobalEmotes, [], 3))\r\n        console.log(\"loaded 7tv global emotes\")\r\n        this.Emotes = Object.assign(this.Emotes, await apis.RetryOnError(apis.getBttvGlobalEmotes, [], 3))\r\n        console.log(\"loaded bttv global emotes\")\r\n\r\n        let ffz_data = await apis.RetryOnError(apis.getFfzEmotes, [this.channel], 3) // this contains emotes, mod badge, vip badge\r\n\r\n        if (ffz_data[0] != undefined) {this.Emotes = Object.assign(this.Emotes, ffz_data[0])}\r\n        console.log(\"loaded ffz channel emotes\")\r\n\r\n        this.Emotes = Object.assign(this.Emotes, await apis.RetryOnError(apis.getFfzGlobalEmotes, [], 3))\r\n        console.log(\"loaded ffz global emotes\")\r\n\r\n        let gb = await apis.RetryOnError(apis.getGlobalBadges, [], 3)\r\n        if (this.GlobalBadges[\"subscriber\"]) {\r\n          gb[\"subscriber\"] = this.GlobalBadges[\"subscriber\"]\r\n        }\r\n        this.GlobalBadges = gb\r\n        if (ffz_data[1] != undefined) {this.GlobalBadges[\"moderator\"][\"1\"] = ffz_data[1]; this.overridedBadges = true}\r\n        if (ffz_data[2] != undefined) this.GlobalBadges[\"vip\"][\"1\"] = ffz_data[2]\r\n\r\n        let bp = await apis.RetryOnError(apis.get7tvBadgesPaints, [], 3)\r\n        this.OtherBadges = bp[0]\r\n        this.OtherBadges.unshift({\"Users\": [\"407046453\"], \"Url\": \"https://i.imgur.com/qgO1Y7A.png\"}) // custom badges )))\r\n        this.OtherBadges.unshift({\"Users\": [\"521810742\"], \"Url\": \"https://cdn.7tv.app/emote/63d6ed00349f81ba10452fdd/2x.webp\"})\r\n        this.OtherBadges.unshift({\"Users\": [\"69078167\"], \"Url\": \"https://i.imgur.com/nIm3MvW.gif\"})\r\n        this.OtherBadges.unshift({\"Users\": [\"489131898\"], \"Url\": \"https://i.imgur.com/Kg7X4ga.gif\"})\r\n        this.Paints = bp[1]\r\n    },\r\n    computed: {\r\n      transition_group() {\r\n        if (this.deleteAfter != \"0\") return \"tr\"\r\n        return \"fl\"\r\n      }\r\n    }\r\n  }\r\n</script>\r\n  \r\n<style>\r\n  body {\r\n    margin: 0px;\r\n    overflow: hidden;\r\n  }\r\n  #chat {\r\n    position: absolute;\r\n    width: 100%;\r\n\r\n    bottom: 0;\r\n\r\n    overflow: hidden;\r\n    font-family: v-bind(fontName);\r\n  }\r\n\r\n  .tr-leave-active {\r\n    transition: opacity 0.5s ease;\r\n  }\r\n  .tr-leave-to {\r\n    opacity: 0;\r\n  }\r\n</style>\r\n  ","<template>\r\n    <div class=\"ChatMessage\">\r\n      <div v-for=\"badge in Badges\" :key=\"badge\" class=\"Badge\">\r\n          <img :provider=\"badge.provider\" :src=\"badge.Url\">\r\n      </div>\r\n      <span>\r\n        <span :HavePaints=\"HavePaints\" class=\"message-nick\" :style=\"{color: color}\">{{ nick }}: </span>\r\n        <span class=\"message-text\" :action=\"this.payload.action\" :HavePaints=\"HavePaints\">\r\n          <template v-for=\"mes in FinalMessage\" :key=\"mes\">\r\n            <img v-if=\"mes.Type=='emote'\" :src=\"mes.Text\" :ZeroWidth=\"mes.ZeroWidth\">\r\n            <template v-if=\"mes.Type=='text'\">{{mes.Text}}</template>\r\n          </template>  \r\n        </span>\r\n      </span>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport Common from '@/utils/common'\r\nimport ColourDistance from '@/utils/colour'\r\n// import twemoji from 'twemoji'\r\n\r\n\r\nexport default {\r\n  name: 'ChatMessage',\r\n  data() {\r\n    return {\r\n      EmotesBaseUrl: {\r\n        \"7TV\": \"https://cdn.7tv.app/emote/{0}/2x.webp\",\r\n        \"BTTV\": \"https://cdn.betterttv.net/emote/{0}/2x\",\r\n        \"FFZ\": \"https://cdn.frankerfacez.com/emote/{0}/2\",\r\n        \"TWITCH\": \"\"\r\n      },\r\n      Paint: null,\r\n      HavePaints: false,\r\n      displayName: \"\",\r\n\r\n      dot : 0,\r\n\r\n      Badges: [],\r\n\r\n      smoothColors: this.$route.query.smoothcolor || \"1\",\r\n\r\n      paintsEnabled: this.$route.query.paints || \"1\",\r\n      shadowText: this.$route.query.shadowtext || \"0\",\r\n      font_size: this.$route.query.font_size || \"18\",\r\n      interpolateSize: this.$route.query.interpbs != \"0\",\r\n      border: this.$route.query.border || \"2\",\r\n      padding: this.$route.query.padding || \"1\",\r\n    }\r\n  },\r\n  props: {\r\n    PersonalEmotes: Array,\r\n    Emotes: Object,\r\n    OtherBadges: Array,\r\n    GlobalBadges: Object,\r\n    Paints: Array,\r\n\r\n    overridedBadges: Boolean,\r\n\r\n    defaultColors: Array,\r\n\r\n    payload: Object,\r\n    BG: String,\r\n  },\r\n  created: async function() {\r\n      if (this.payload.command.command != \"PRIVMSG\") {\r\n          return {}\r\n      }\r\n      this.displayName = this.payload.tags[\"display-name\"]\r\n      if (this.payload.tags[\"display-name\"] == undefined) {\r\n        this.displayName = this.payload.user\r\n      }\r\n\r\n      // twitch badges\r\n      if (this.payload.tags.badges) {\r\n        for (const [key, value] of Object.entries(this.payload.tags[\"badges\"])) {\r\n          if (this.GlobalBadges[key]) {\r\n            let provider = \"Twitch\"\r\n            if (this.overridedBadges && key == \"moderator\") provider = \"ffz-mod-badge\"\r\n            this.Badges.push({\"Url\": this.GlobalBadges[key][value], \"provider\": provider})\r\n          }\r\n        }\r\n      }\r\n      // parse extension badges\r\n      if (this.OtherBadges) {\r\n        for (const value of this.OtherBadges) {\r\n          if (value.Users.includes(this.payload.tags[\"user-id\"])) {\r\n            this.Badges.push({\"Url\": value.Url, \"provider\": value.Type})\r\n          }\r\n        }\r\n      }\r\n\r\n      // 7tv paints\r\n      if (this.paintsEnabled == \"1\") {\r\n        for (const value of this.Paints) {\r\n          if (value.users.includes(this.payload.tags[\"user-id\"])) {\r\n            this.HavePaints = true\r\n            this.Paint = value\r\n            break\r\n          }\r\n        }\r\n      }\r\n  },\r\n  computed: {\r\n    nick() {\r\n      if (this.displayName.toLowerCase() != this.payload.source.nick) return `${this.payload.source.nick} (${this.displayName})`\r\n      return this.displayName\r\n    },\r\n    color() {\r\n      let color = this.payload.tags.color\r\n      if (!this.payload.tags.color) {\r\n        color = this.defaultColors[Math.floor(Math.random() * this.defaultColors.length)]\r\n      }\r\n      if (this.BG != \"transparent\" && this.smoothColors == \"1\") {\r\n        // если сообщение сливается с фоном:\r\n        let userRGB = Common.hexToRgb(color)\r\n        let backgroundRGB = Common.hexToRgb(this.BG)\r\n\r\n        // схожесть цветов\r\n        let userXYZ = ColourDistance.rgb2xyz(userRGB[0], userRGB[1], userRGB[2])\r\n        let backgroundXYZ = ColourDistance.rgb2xyz(backgroundRGB[0], backgroundRGB[1], backgroundRGB[2])\r\n\r\n\r\n        let distance = ColourDistance.deltaE00(userXYZ[0], userXYZ[1], userXYZ[2], backgroundXYZ[0], backgroundXYZ[1], backgroundXYZ[2]) * 10\r\n        if (distance == 0) {\r\n          distance = 0.0001\r\n        }\r\n        if (distance < 0.3) {\r\n          // значит фон сливается, теперь мы добавляем/убавляем +40% яркость пользователю\r\n          let newColor = Common.pSBC(0.25, color)\r\n          return newColor\r\n        }\r\n      }\r\n      return color\r\n    },\r\n    FinalMessage() {\r\n      let TempMessage = `${this.payload.parameters}`\r\n\r\n      // TempMessage = twemoji.parse(TempMessage)\r\n\r\n      let f_mes = Common.textToMessageObject(TempMessage)\r\n\r\n      if (this.payload.tags.emotes) {\r\n        let twitchEmotes = Common.parse_smiles(TempMessage, this.payload.tags[\"emotes\"])\r\n        for (const [em, url] of Object.entries(twitchEmotes)) {\r\n          for (const i in f_mes) {\r\n            if (f_mes[i].Text.slice(0, -1) == em) {\r\n              f_mes[i].Type = \"emote\"\r\n              f_mes[i].Text = url\r\n              f_mes[i].ZeroWidth = false\r\n            }\r\n          }\r\n        }\r\n      }\r\n      /* eslint-disable no-unused-vars */\r\n      for (const i in f_mes) {\r\n        if (this.Emotes[f_mes[i].Text.slice(0, -1)]) {\r\n          let em = this.Emotes[f_mes[i].Text.slice(0, -1)]\r\n          f_mes[i].Type = \"emote\"\r\n          f_mes[i].Text = this.EmotesBaseUrl[em.Type].replace('{0}', em.ID)\r\n          f_mes[i].ZeroWidth = em.ZeroWidth\r\n        }\r\n      }\r\n\r\n      if (this.PersonalEmotes !== undefined) {\r\n        for (const em of this.PersonalEmotes) {\r\n          for (const i in f_mes) {\r\n            if (f_mes[i].Text.slice(0, -1) == em.Name) {\r\n              f_mes[i].Type = \"emote\"\r\n              f_mes[i].Text = this.EmotesBaseUrl[em.Type].replace('{0}', em.ID)\r\n              f_mes[i].ZeroWidth = em.ZeroWidth\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      return f_mes\r\n    },\r\n    bgImage() {\r\n      if (!this.Paint) {\r\n        return \"\"\r\n      }\r\n      const ccsFunc = this.Paint.function\r\n\r\n      const args = []\r\n      switch (this.Paint.function) {\r\n          case \"linear-gradient\":\r\n              args.push(`${this.Paint.angle}deg`)\r\n              break;\r\n          case \"radial-graient\":\r\n              args.push(this.Paint.shape ?? \"circle\")\r\n              break\r\n          case \"url\":\r\n              args.push(this.Paint.image_url ?? \"\")\r\n              break\r\n      }\r\n      let funcPrefix = \"\"\r\n      if (this.Paint.function !== \"URL\") {\r\n          funcPrefix = this.Paint.repeat ? \"repeating-\" : \"\"\r\n      }\r\n      for (const stop of this.Paint.stops) {\r\n          const color = Common.DecimalToStringRGBA(stop.color)\r\n          args.push(`${color} ${stop.at * 100}%`)\r\n      }\r\n      return `${funcPrefix}${ccsFunc}(${args.join(\", \")})`\r\n    },\r\n    filterText() {\r\n      if (this.shadowText == \"1\") {\r\n        return \"drop-shadow(1px 2px 1px #2b2b2b)\"\r\n      }\r\n      return \"\"\r\n    },\r\n    filter() {\r\n      try {\r\n        return this.Paint.drop_shadows\r\n        .map((v) => `drop-shadow(${v.x_offset}px ${v.y_offset}px ${v.radius}px ${Common.DecimalToStringRGBA(v.color)})`)\r\n        .join(\" \");\r\n      } catch (error) {\r\n        return \"\"\r\n      }\r\n    },\r\n    paintColor() {\r\n      if (!this.Paint) {\r\n        return \"\"\r\n      }\r\n      return Common.DecimalToStringRGBA(this.Paint.color)\r\n    },\r\n    badgeSize() {\r\n      if (this.interpolateSize && parseInt(this.font_size)) {\r\n        return Math.round(0.8 * parseInt(this.font_size) + 4.4).toString() + \"px\"\r\n      }\r\n      return \"18px\"\r\n    },\r\n    emoteSize() {\r\n      if (this.interpolateSize && parseInt(this.font_size)) {\r\n        return (parseInt(this.font_size) + 14).toString() + \"px\"\r\n      }\r\n      return \"32px\"\r\n    },\r\n    messageSize() {\r\n      if (this.interpolateSize && parseInt(this.font_size)) {\r\n        return Math.round(1.33 * parseInt(this.font_size) + 7).toString() + \"px\"\r\n      }\r\n      return \"31px\"\r\n    },\r\n    Font_Size() {\r\n        return `${this.font_size}px`\r\n    },\r\n    Border() {\r\n      return `${this.border}px solid black`\r\n    },\r\n    Padding() {\r\n      if (this.padding == \"1\") {\r\n        return \"3px\"\r\n      }\r\n      return \"0px\"\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n  .Badge {\r\n    display: inline-block;\r\n    padding-right: 3px;\r\n  }\r\n  .Badge img {\r\n    height: v-bind(badgeSize);\r\n    /* vertical-align: middle; */\r\n    margin-bottom: -3px;\r\n  }\r\n  .Badge img[provider=\"ffz-mod-badge\"] {\r\n    background-color: #00ad03;\r\n    border-radius: 2px;\r\n  }\r\n  .ChatMessage {\r\n    padding-top: v-bind(Padding);\r\n    padding-bottom: v-bind(Padding);\r\n\r\n    padding-left: 5px;\r\n\r\n    min-height: v-bind(messageSize);\r\n    font-size: v-bind(Font_Size);\r\n\r\n    width: 100%;\r\n\r\n    display: inline-block;\r\n\r\n    background: v-bind(BG);\r\n    color: white;\r\n    border-top: v-bind(Border);\r\n  }\r\n  .message-text {\r\n    bottom: 5px;\r\n    margin-right: 13px;\r\n    filter: v-bind('filterText');\r\n  }\r\n\r\n  .message-text img, .emoji {\r\n    height: v-bind(emoteSize);\r\n    vertical-align: middle;\r\n    filter: unset;\r\n    padding-right: 8px;\r\n  }\r\n  .message-nick {\r\n    font-weight: 700;\r\n\r\n    background-size: cover;\r\n    filter: v-bind('filter');\r\n    color: v-bind('paintColor');\r\n  }\r\n  .message-nick[HavePaints=\"true\"] {\r\n    -webkit-text-fill-color: transparent;\r\n    -webkit-background-clip: text;\r\n    background-clip: text !important;\r\n    background-color: currentcolor;\r\n    background-image: v-bind('bgImage');\r\n  }\r\n  .message-text img[ZeroWidth=\"true\"] {\r\n    position: absolute;\r\n\t\tz-index: 1;\r\n\t\ttransform: translateX(-100%);\r\n  }\r\n\r\n  .message-text[action=\"true\"][HavePaints=\"false\"] {\r\n    color: v-bind('color')\r\n  }\r\n\r\n  .message-text[action=\"true\"][HavePaints=\"true\"] {\r\n    filter: v-bind('filter');\r\n    color: v-bind('paintColor');\r\n    -webkit-text-fill-color: transparent;\r\n    -webkit-background-clip: text;\r\n    background-clip: text !important;\r\n    background-color: currentcolor;\r\n    background-image: v-bind('bgImage');\r\n  }\r\n</style>\r\n","import { render } from \"./ChatMessage.vue?vue&type=template&id=47bc3b62\"\nimport script from \"./ChatMessage.vue?vue&type=script&lang=js\"\nexport * from \"./ChatMessage.vue?vue&type=script&lang=js\"\n\nimport \"./ChatMessage.vue?vue&type=style&index=0&id=47bc3b62&lang=css\"\n\nimport exportComponent from \"S:\\\\golang\\\\eblanchat3.0\\\\eblanchat\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import apis from '@/utils/tpd.js'\r\n\r\n// const wait = async(ms) => {\r\n//     return new Promise((resolve) => {\r\n//         setTimeout(resolve, ms);\r\n//     });\r\n// };\r\n\r\nclass EventAPI {\r\n    constructor(set_id, user_id) {\r\n        this.ws = null\r\n        this.set_id = set_id\r\n        this.user_id = user_id //user_id\r\n        this.onDelete = undefined\r\n        this.onAdd = undefined\r\n        this.onRename = undefined\r\n\r\n        this.onPersonalEmotes = undefined\r\n\r\n        this.IsDisconnected = true\r\n\r\n        this.IsReconnecting = false\r\n\r\n        this.Timeout = 1000\r\n        this.attemps = 0\r\n    }\r\n\r\n    Connect() {\r\n        if (!this.IsDisconnected) return\r\n        \r\n        this.ws = new WebSocket(\"wss://events.7tv.io/v3\");\r\n        this.ws.onmessage = (e) => this.onMessage(e)\r\n        this.ws.onclose = () => this.onClose()\r\n        this.ws.onopen = () => this.onOpen()\r\n        this.ws.onerror = () => {this.ws.close()}\r\n        this.IsReconnecting = false\r\n    }\r\n\r\n    async onOpen() {\r\n        this.IsDisconnected = false\r\n        console.log(\"EVENT API connected\")\r\n    }\r\n\r\n    async onClose() {\r\n        if (this.IsReconnecting) return\r\n\r\n        this.IsReconnecting = true\r\n\r\n        console.log(\"EVENT API disconnected\")\r\n        this.IsDisconnected = true\r\n\r\n        this.attemps++\r\n        setTimeout(() => {this.Connect()}, this.Timeout*this.attemps)\r\n    }\r\n\r\n    subscribeToEvent(event, cond) {\r\n        let message = {\r\n            \"op\": 35,\r\n            \"d\": {\r\n                \"type\": event,\r\n                \"condition\": cond\r\n            }\r\n        }\r\n        this.ws.send(JSON.stringify(message))\r\n    }\r\n\r\n    async onMessage(e) {\r\n        let json = JSON.parse(e.data)\r\n        console.log(json)\r\n        switch (json.op) {\r\n            case 4000, 4001, 4002, 4003, 4004, 4005, 4006, 4007, 4008, 4009, 4010, 4011: {\r\n                console.log(json)\r\n                this.ws.close()\r\n                this.Connect()\r\n                break\r\n            }\r\n            case 1: {\r\n                this.subscribeToEvent(\"emote_set.*\", {\"object_id\": this.set_id})\r\n                //other\r\n                const cond = {\r\n                    \"id\": this.user_id,\r\n                    \"ctx\": \"channel\",\r\n                    \"platform\": \"TWITCH\"\r\n                }\r\n                this.subscribeToEvent(\"emote_set.*\", cond)\r\n                this.subscribeToEvent(\"cosmetic.*\", cond)\r\n                this.subscribeToEvent(\"entitlement.*\", cond)\r\n                // this.subscribeToEvent(\"cosmetic.*\", {\r\n                //     \"id\": \"407046453\",\r\n                //     \"ctx\": \"user\",\r\n                //     \"platform\": \"TWITCH\"\r\n                // })\r\n                break\r\n            }\r\n            case 0:\r\n                switch (json.d.type) {\r\n                    case \"emote_set.update\": {\r\n                        if (json.d.body.pulled) {\r\n                            for (const item of json.d.body.pulled) {\r\n                                this.onDelete(item)\r\n                                break;\r\n                            }\r\n                        }\r\n                        if (json.d.body.pushed) {\r\n                            for (const item of json.d.body.pushed) {\r\n                                this.onAdd(item)\r\n                                break;\r\n                            }\r\n                        }\r\n                        if (json.d.body.updated) {\r\n                            for (const item of json.d.body.updated) {\r\n                                this.onRename(item)\r\n                                break;\r\n                            }\r\n                        }\r\n                        break\r\n                    }\r\n                    // personal emotes:\r\n                    case \"emote_set.create\": {\r\n                        if (json.d.body.object.name != \"Personal Emotes\") break\r\n                        let set_id = json.d.body.object.id\r\n\r\n                        this.onPersonalEmotes(...await apis.get7tvEmoteSet(set_id))\r\n\r\n                        break\r\n                    }\r\n                }\r\n                // че то произошло\r\n\r\n        }\r\n    }\r\n}\r\n\r\nexport default EventAPI","import { render } from \"./chat.vue?vue&type=template&id=2e154a37\"\nimport script from \"./chat.vue?vue&type=script&lang=js\"\nexport * from \"./chat.vue?vue&type=script&lang=js\"\n\nimport \"./chat.vue?vue&type=style&index=0&id=2e154a37&lang=css\"\n\nimport exportComponent from \"S:\\\\golang\\\\eblanchat3.0\\\\eblanchat\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["id","_createElementBlock","_createVNode","_TransitionGroup","name","$options","_Fragment","_renderList","$data","mes","_createBlock","_component_ChatMessage","key","tags","PersonalEmotes","source","nick","Emotes","GlobalBadges","Paints","OtherBadges","defaultColors","payload","BG","overridedBadges","class","badge","_createElementVNode","provider","src","Url","HavePaints","style","color","_hoisted_3","action","Type","Text","ZeroWidth","__default__","data","EmotesBaseUrl","Paint","displayName","dot","Badges","smoothColors","this","$route","query","smoothcolor","paintsEnabled","paints","shadowText","shadowtext","font_size","interpolateSize","interpbs","border","padding","props","Array","Object","Boolean","String","created","async","command","undefined","user","badges","value","entries","push","Users","includes","users","computed","toLowerCase","Math","floor","random","length","userRGB","Common","backgroundRGB","userXYZ","ColourDistance","backgroundXYZ","distance","newColor","FinalMessage","TempMessage","parameters","f_mes","emotes","twitchEmotes","em","url","i","slice","replace","ID","Name","bgImage","ccsFunc","function","args","angle","shape","image_url","funcPrefix","repeat","stop","stops","at","join","filterText","filter","drop_shadows","map","v","x_offset","y_offset","radius","error","paintColor","badgeSize","parseInt","round","toString","emoteSize","messageSize","Font_Size","Border","Padding","__exports__","EventAPI","constructor","set_id","user_id","ws","onDelete","onAdd","onRename","onPersonalEmotes","IsDisconnected","IsReconnecting","Timeout","attemps","Connect","WebSocket","onmessage","e","onMessage","onclose","onClose","onopen","onOpen","onerror","close","console","log","setTimeout","subscribeToEvent","event","cond","message","send","JSON","stringify","json","parse","op","d","type","body","pulled","item","pushed","updated","object","apis","components","ChatMessage","EventApi","altBG","altbg","background","BG2","useEventAPI","eventapi","pEmotesEnabled","pemotes","deleteAfter","deleteafter","fontName","fontname","ignoreList","ignore","split","channel","currBG","channelID","client","Messages","methods","onEmoteDelete","old_value","onEmoteAdd","onEmoteRename","stv","assign","subs","getbttvchannel","get7tvchannel","getsubscriberbadges","useHead","link","href","rel","minus","gray","Twitch","OnUserId","onUserID","OnPrivateMessage","index","indexOf","splice","shift","OnClearChat","OnClearMessage","connect","userid","ffz_data","gb","bp","unshift","transition_group","render"],"sourceRoot":""}